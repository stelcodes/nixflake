DIGITAL OCEAN
=======================
Use Ubuntu 18.04.3 (LTS) x64

Set hostname

Enable IPv6

Put this in Digital Ocean's "user data" config:
See digital-ocean-user-data.yaml

Log files:
/tmp/infect.log
/var/log/cloud-init-output.log

Create new ssh key pair with password:
ssh-keygen -t ed25519

Copy public key:
cat /home/stel/.ssh/id_ed25519.pub

Put it in Github

Clone config:
git clone git@github.com:stelcodes/nixos-config.git /home/stel/config
mkdir /home/stel/config/hosts/<hostname>
cp /etc/nixos/* /home/stel/config/hosts/<hostname>
doas rm -rf /etc/nixos
doas ln -s /home/stel/config/hosts/<hostname> /etc/nixos

Edit nix channels:
doas nix-channel --add https://nixos.org/channels/nixos-unstable nixos
doas nix-channel --add https://github.com/nix-community/home-manager/archive/master.tar.gz home-manager
doas nix-channel --update

Edit configuration.nix:
- Add pkgs, config to top level arguments
- Add <home-manager/nixos> to imports
- Add basic home-manager config:
  home-manager = {
    useGlobalPkgs = true;
    users.stel = { config, ... }:
      pkgs.lib.mkMerge [
        (import /home/stel/config/home-manager pkgs)
      ];
  };

Rebuild config:
doas nixos-rebuild swith --upgrade

